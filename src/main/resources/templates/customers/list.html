<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Customer List</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-4">

<h2>Customer List</h2>

<!-- Search Form -->
<form th:action="@{/customers}" method="get" class="mb-3 row g-2">
  <div class="col-auto">
    <input type="text" name="keyword" th:value="${keyword}" placeholder="Search by name or email" class="form-control"/>
  </div>
  <div class="col-auto">
    <button type="submit" class="btn btn-primary">Search</button>
  </div>
  <div class="col-auto">
    <a th:href="@{/customers/new}" class="btn btn-success">Add New Customer</a>
  </div>
</form>

<!-- Customer Table -->
<table class="table table-striped table-bordered">
  <thead>
  <tr>
    <th>ID</th><th>Name</th><th>Email</th><th>Phone</th><th>Action</th>
  </tr>
  </thead>
  <tbody>
  <tr th:each="c : ${customers}">
    <td th:text="${c.id}"></td>
    <td th:text="${c.name}"></td>
    <td th:text="${c.email}"></td>
    <td th:text="${c.phone}"></td>
    <td>
      <a th:href="@{/customers/edit/{id}(id=${c.id})}" class="btn btn-sm btn-warning">Edit</a>
      <a th:href="@{/customers/delete/{id}(id=${c.id})}" class="btn btn-sm btn-danger"
         onclick="return confirm('Are you sure you want to delete this customer?')">Delete</a>
    </td>
  </tr>
  <tr th:if="${#lists.isEmpty(customers)}">
    <td colspan="5" class="text-center">No customers found</td>
  </tr>
  </tbody>
</table>

<!-- Pagination -->
<nav th:if="${totalPages > 1}">
  <ul class="pagination">
    <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
      <a class="page-link" th:href="@{/customers(page=${currentPage-1}, keyword=${keyword})}">Previous</a>
    </li>

    <li class="page-item" th:each="i : ${#numbers.sequence(0, totalPages-1)}"
        th:classappend="${i == currentPage} ? 'active'">
      <a class="page-link" th:href="@{/customers(page=${i}, keyword=${keyword})}" th:text="${i+1}">1</a>
    </li>

    <li class="page-item" th:classappend="${currentPage + 1 >= totalPages} ? 'disabled'">
      <a class="page-link" th:href="@{/customers(page=${currentPage+1}, keyword=${keyword})}">Next</a>
    </li>
  </ul>
</nav>

</body>
</html>
